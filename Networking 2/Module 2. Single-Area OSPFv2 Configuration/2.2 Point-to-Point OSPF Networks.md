## 2.2.1 The network Command Syntax

One type of network classified by OSPF is a point-to-point network. You can specify the interfaces that belong to a point-to-point network by configuring the **network** command. You can also configure OSPF directly on the interface with the **ip ospf** command, as we will see later.

Both commands are used to determine which interfaces participate in the routing process for an OSPFv2 area. The basic syntax for the **network** command is as follows:
![[Pasted image 20241001180411.png]]
- The _network-address wildcard-mask_ syntax is used to enable OSPF on interfaces. Any interfaces on a router that match the network address in the **network** command are enabled to send and receive OSPF packets.
- The **area** _area-id_ syntax refers to the OSPF area. When configuring single-area OSPFv2, the **network** command must be configured with the same _area-id_ value on all routers. Although any area ID can be used, it is good practice to use an area ID of 0 with single-area OSPFv2. This convention makes it easier if the network is later altered to support multiarea OSPFv2.

## 2.2.2 The Wildcard Mask

The wildcard mask is typically the inverse of the subnet mask configured on that interface. In a subnet mask, binary 1 is equal to a match and binary 0 is not a match. In a wildcard mask, the reverse is true, as shown in here:

- **Wildcard mask bit 0** - Matches the corresponding bit value in the address.
- **Wildcard mask bit 1** - Ignores the corresponding bit value in the address.

The easiest method for calculating a wildcard mask is to subtract the network subnet mask from 255.255.255.255, as shown for /24 and /26 subnet masks in the figure.
![[Pasted image 20241001180450.png]]
![[Pasted image 20241001180455.png]]

## 2.2.4 Configure OSPF Using the network Command

Within routing configuration mode, there are two ways to identify the interfaces that will participate in the OSPFv2 routing process. The figure shows the reference topology.
![[Pasted image 20241001181823.png]]
In the first example, the wildcard mask identifies the interface based on the network addresses. Any active interface that is configured with an IPv4 address belonging to that network will participate in the OSPFv2 routing process.
![[Pasted image 20241001181840.png]]
**Note:** Some IOS versions allow the subnet mask to be entered instead of the wildcard mask. The IOS then converts the subnet mask to the wildcard mask format.

As an alternative, the second example shows how OSPFv2 can be enabled by specifying the exact interface IPv4 address using a quad zero wildcard mask. Entering **network 10.1.1.5 0.0.0.0 area 0** on R1 tells the router to enable interface Gigabit Ethernet 0/0/0 for the routing process. As a result, the OSPFv2 process will advertise the network that is on this interface (10.1.1.4/30).
![[Pasted image 20241001181852.png]]
The advantage of specifying the interface is that the wildcard mask calculation is not necessary. Notice that in all cases, the **area** argument specifies area 0.

## 2.2.6 Configure OSPF Using the ip ospf Command

You can also configure OSPF directly on the interface instead of using the **network** command. To configure OSPF directly on the interface, use the **ip ospf** interface configuration mode command. The syntax is as follows:
![[Pasted image 20241001181939.png]]
For R1, remove the network commands by using the **no** form of the **network** commands. And then go to each interface and configure the **ip ospf** command, as shown in the command window.
![[Pasted image 20241001181951.png]]

## 2.2.8 Passive Interface

By default, OSPF messages are forwarded out all OSPF-enabled interfaces. However, these messages really only need to be sent out interfaces that are connecting to other OSPF-enabled routers.

Refer to the topology in the figure. OSPFv2 messages are forwarded out the three loopback interfaces even though no OSPFv2 neighbor exists on these simulated LANs. In a production network, these loopbacks would be physical interfaces to networks with users and traffic. Sending out unneeded messages on a LAN affects the network in three ways, as follows:

- **Inefficient Use of Bandwidth** - Available bandwidth is consumed transporting unnecessary messages.
- **Inefficient Use of Resources** - All devices on the LAN must process and eventually discard the message.
- **Increased Security Risk** - Without additional OSPF security configurations, OSPF messages can be intercepted with packet sniffing software. Routing updates can be modified and sent back to the router, corrupting the routing table with false metrics that misdirect traffic.
![[Pasted image 20241001182019.png]]

## 2.2.9 Configure Passive Interfaces

Use the **passive-interface** router configuration mode command to prevent the transmission of routing messages through a router interface, but still allow that network to be advertised to other routers. The configuration example identifies the R1 Loopback 0/0/0 interface as passive.

**Note:** The loopback interface in this example is representing an Ethernet network. In production networks, loopback interfaces do not require to be passive.

The **show ip protocols** command is then used to verify that the Loopback 0 interface is listed as passive. The interface is still listed under the heading, “Routing on Interfaces Configured Explicitly (Area 0)”, which means that this network is still included as a route entry in OSPFv2 updates that are sent to R2 and R3.
![[Pasted image 20241001182045.png]]

## 2.2.11 OSPF Point-to-Point Networks

By default, Cisco routers elect a DR and BDR on Ethernet interfaces, even if there is only one other device on the link. You can verify this with the **show ip ospf interface** command, as shown in the example for G0/0/0 of R1.
![[Pasted image 20241001182120.png]]

R1 is the BDR and R2 is the DR. The DR/ BDR election process is unnecessary as there can only be two routers on the point-to-point network between R1 and R2. Notice in the output that the router has designated the network type as BROADCAST. To change this to a point-to-point network, use the interface configuration command **ip ospf network point-to-point** on all interfaces where you want to disable the DR/BDR election process. The example below shows this configuration for R1. The OSPF neighbor adjacency status will go down for a few milliseconds.
```
R1(config)# interface GigabitEthernet 0/0/0R1(config-if)# ip ospf network point-to-point*Jun  6 00:44:05.208: %OSPF-5-ADJCHG: Process 10, Nbr 2.2.2.2 on GigabitEthernet0/0/0 from FULL to DOWN, Neighbor Down: Interface down or detached*Jun  6 00:44:05.211: %OSPF-5-ADJCHG: Process 10, Nbr 2.2.2.2 on GigabitEthernet0/0/0 from LOADING to FULL, Loading DoneR1(config-if)# interface GigabitEthernet 0/0/1R1(config-if)# ip ospf network point-to-point *Jun  6 00:44:45.532: %OSPF-5-ADJCHG: Process 10, Nbr 3.3.3.3 on GigabitEthernet0/0/1 from FULL to DOWN, Neighbor Down: Interface down or detached*Jun  6 00:44:45.535: %OSPF-5-ADJCHG: Process 10, Nbr 3.3.3.3 on GigabitEthernet0/0/1 from LOADING to FULL, Loading DoneR1(config-if)# endR1# show ip ospf interface GigabitEthernet 0/0/0GigabitEthernet0/0/0 is up, line protocol is up   Internet Address 10.1.1.5/30, Area 0, Attached via Interface Enable  Process ID 10, Router ID 1.1.1.1, Network Type POINT_TO_POINT, Cost: 1  Topology-MTID    Cost    Disabled    Shutdown      Topology Name        0           1         no          no            Base  Enabled by interface config, including secondary ip addresses  Transmit Delay is 1 sec, State POINT_TO_POINT  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5    oob-resync timeout 40    Hello due in 00:00:04  Supports Link-local Signaling (LLS)  Cisco NSF helper support enabled  IETF NSF helper support enabled  Index 1/2/2, flood queue length 0  Next 0x0(0)/0x0(0)/0x0(0)  Last flood scan length is 1, maximum is 2  Last flood scan time is 0 msec, maximum is 1 msec  Neighbor Count is 1, Adjacent neighbor count is 1     Adjacent with neighbor 2.2.2.2  Suppress hello for 0 neighbor(s)R1#
```

Notice that the Gigabit Ethernet 0/0/0 interface now lists the network type as POINT_TO_POINT and that there is no DR or BDR on the link.

## 2.2.12 Loopbacks and Point-to-Point Networks

We use loopbacks to provide additional interfaces for a variety of purposes. In this case, we are using loopbacks to simulate more networks than the equipment can support. By default, loopback interfaces are advertised as /32 host routes. For example, R1 would advertise the 10.10.1.0/24 network as 10.10.1.1/32 to R2 and R3.
```
R2# show ip route | include 10.10.1 O        10.10.1.1/32 [110/2] via 10.1.1.5, 00:03:05, GigabitEthernet0/0/0
```
To simulate a real LAN, the Loopback 0 interface is configured as a point-to-point network so that R1 will advertise the full 10.10.1.0/24 network to R2 and R3.
```
R1(config-if)# interface Loopback 0R1(config-if)# ip ospf network point-to-point
```
Now R2 receives the more accurate, simulated LAN network address of 10.10.1.0/24.
```
R2# show ip route | include 10.10.1O        10.10.1.0/24 [110/2] via 10.1.1.5, 00:00:30, GigabitEthernet0/0/0
```
